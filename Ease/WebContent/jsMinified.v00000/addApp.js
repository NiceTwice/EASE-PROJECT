function showAddAppPopup(o,t){var p=$("#PopupAddApp"),d=$($("#boxHelper").html());popupAddApp.open(),popupAddApp.appId(null),popupAddApp.setHelper($(t)),popupAddApp.setAppsContainer($(o)),popupAddApp.setNewAppItem(d),popupAddApp.setVal($(t).attr("name")),p.find(".loginWithButton").removeClass("locked"),p.find(".or").css("display","block"),p.find(".loginAppChooser .ChooserContent").empty(),p.find(".loginAppChooser").css("display","none"),p.find(".loginSsoChooser .ChooserContent").empty(),p.find(".loginSsoChooser").css("display","none"),p.find("button.Active").prop("disabled",!0),p.find("button.Active").removeClass("Active"),d.attr("name",$(t).attr("name")),d.find("img.logo").attr("src",$(t).find("img").attr("src")),d.find(".siteName p").text($(t).attr("name")),p.find(".logoApp").attr("src",$(t).find("img").attr("src"));var e=$("#PopupAddApp .loginWithChooser"),s=$(t).attr("data-login").split(",");if(e.addClass("hidden"),e.find(".loginWithButton").addClass("hidden"),""!=$(t).attr("data-login")){e.removeClass("hidden");for(var n=0;n<s.length;n++)e.find(".loginWithButton[name='"+$(".catalogApp[idx='"+s[n]+"']").attr("name")+"']").removeClass("hidden")}var i=$(".loginSsoChooser .ChooserContent"),a=$("<div class='AccountApp'><div class='imageHandler'><img src='' /></div><p></p></div>"),l=$("#PopupAddApp .loginSsoChooser"),r=$(t).attr("data-sso");if(""!=r&&"0"!=r){var c=$(".siteLinkBox[ssoId='"+r+"']"),A=[];0!=c.length&&l.css("display","block");for(var n=0;n<c.length;n++)A.includes($(c[n]).attr("login"))||""==$(c[n]).attr("login")||null==$(c[n]).attr("login")||(a.find("p").text($(c[n]).attr("login")),a.attr("aId",$(c[n]).attr("id")),a.find("img").attr("src","resources/sso/"+r+".png"),SsoHelperCloned=$(a).clone(),SsoHelperCloned.click(function(){$(this).closest(".ChooserContent").find(".AccountApp.selected").removeClass("selected"),$(this).addClass("selected"),popupAddApp.appId(a.attr("aid")),popupAddApp.setPostName("addAppWithSso")}),i.append(SsoHelperCloned),A.push($(c[n]).attr("login")))}"true"==$(t).attr("data-nologin")&&(p.find(".classicLogin").removeClass("show"),$(".or").css("display","none")),$("#PopupAddApp .buttonBack").unbind("click"),$("#PopupAddApp .buttonBack").click(function(){var o=$(this).closest(".md-content");o.find(".loginWithButton").removeClass("locked"),o.find(".loginAppChooser .ChooserContent").empty(),o.find(".loginAppChooser").css("display","none"),"true"!=$(t).attr("data-nologin")&&(popupAddApp.appId(null),o.find(".classicLogin").addClass("show"),o.find(".or").css("display","block"))})}$(document).ready(function(){$("#PopupAddApp .loginWithButton").click(function(){$(".loginAppChooser p").text("Select your account");var o=$(this).closest(".md-content"),t=$(this).closest(".md-content").find(".loginAppChooser .ChooserContent"),p=$(".catalogApp[name='"+$(this).attr("name")+"']").attr("idx"),d=$("<div class='AccountApp'><div class='imageHandler'><img src='' /></div><p></p></div>");t.empty();var e;o.find(".loginWithButton").removeClass("locked"),$(this).addClass("locked"),o.find(".loginAppChooser").css("display","block"),o.find(".classicLogin").removeClass("show"),o.find(".or").css("display","none");var s=$(".siteLinkBox[webid='"+p+"']");if(0==s.length){var n=$(".catalogApp[idx='"+p+"']").attr("name");n&&$(".loginAppChooser p").text("No "+n+" account detected")}for(var i=0;i<s.length;i++)d.attr("aId",$(s[i]).attr("id")),d.find("p").text($(s[i]).attr("login")),d.find("img").attr("src",$(s[i]).find("img.logo").attr("src")),e=$(d).clone(),e.click(function(){$(o).find(".AccountApp.selected").removeClass("selected"),$(this).addClass("selected"),popupAddApp.appId($(this).attr("aid")),popupAddApp.setPostName("AddLogwithApp")}),0==i&&($(e).addClass("selected"),popupAddApp.appId($(e).attr("aid")),popupAddApp.setPostName("AddLogwithApp")),t.append(e)})});